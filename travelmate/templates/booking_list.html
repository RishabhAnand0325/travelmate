{% extends 'base.html' %}
{% block content %}
<h2>My Bookings</h2>

<h4 class="mt-3">Current</h4>
{% if current %}
  <div class="list-group mb-4">
    {% for b in current %}
    <div class="list-group-item">
      <div class="d-flex justify-content-between align-items-center">
        <div>
          <strong>{{ b.travel_option.type }}</strong> {{ b.travel_option.source }} → {{ b.travel_option.destination }}
          <div class="small text-muted">Departs {{ b.travel_option.departure_datetime|date:"D, M j, Y g:i A" }}</div>
          <div class="small">Seats: {{ b.number_of_seats }} | Total: ₹ {{ b.total_price }}</div>
        </div>
        <div>
          {% if b.status != 'Cancelled' %}
          <a class="btn btn-sm btn-outline-danger" href="{% url 'cancel_booking' b.pk %}">Cancel</a>
          {% endif %}
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
{% else %}
  <p class="text-muted">No current bookings.</p>
{% endif %}

<h4>Past & Cancelled</h4>
{% if past %}
  <div class="list-group">
    {% for b in past %}
    <div class="list-group-item">
      <div class="d-flex justify-content-between">
        <div>
          <strong>{{ b.travel_option.type }}</strong> {{ b.travel_option.source }} → {{ b.travel_option.destination }}
          <div class="small text-muted">Departed {{ b.travel_option.departure_datetime|date:"D, M j, Y g:i A" }}</div>
          <div class="small">Seats: {{ b.number_of_seats }} | Total: ₹ {{ b.total_price }}</div>
        </div>
        <span class="badge bg-secondary align-self-center">{{ b.status }}</span>
      </div>
    </div>
    {% endfor %}
  </div>
{% else %}
  <p class="text-muted">No past bookings.</p>
{% endif %}
{% endblock %}
